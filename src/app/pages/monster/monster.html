<div class="preview">
    <app-playing-card [monster]="monster"></app-playing-card>
</div>
<div class="main">
  <form [formGroup]="formGroup" (submit)="submit($event)">
    <div class="form-field">
        <label for="name">Name</label>
        <input id="name" name="name" type="text" formControlName="name">
        @if(isFieldValid("name")) {
            <div class="error">This field is invalid</div>
        }
    </div>
    <div class="form-field">
        <label for="image">Image</label>
        <input name="image" id="image" type="file" (change)="onFileChange($event)">       
        @if(isFieldValid("image")) {
            <div class="error">This field is invalid</div>
        }
    </div>
    <div class="form-field">
        <label for="type">Type</label>
        <select name="type" id="type" formControlName="type">
            @for (type of monsterTypes; track type){
                <option [value]="type">{{type}}</option>
            }
        </select>
        
        @if(isFieldValid("type")) {
            <div class="error">This field is invalid</div>
        }
    </div>

    <div class="form-field">
    <label for="hp">HP</label>
    <input id="hp" name="hp" type="number" formControlName="hp">
        @if(isFieldValid("hp")) {
            @if(formGroup.get('hp')?.hasError('required')){
            <div class="error">This field is invalid</div>
        }
        @if(formGroup.get('hp')?.hasError('min')){
        <div class="error">This field must be higher than 0</div>
        }
    }
            @if(formGroup.get('hp')?.hasError('max')){
        <div class="error">This field must be smaller than 0</div>
        }
    </div>
    <div class="form-field">
        <label for="figureCaption">Figure Caption</label>
        <input id="figureCaption" name="figureCaption" type="text" formControlName="figureCaption">
        @if(isFieldValid("figureCaption")) {
            <div class="error">This field is invalid</div>
        }
    </div>
    <div class="form-field">
        <label for="attackName">Attack name</label>
        <input id="attackName" name="attackName" type="text" formControlName="attackName">
        @if(isFieldValid("attackName")) {
            <div class="error">This field is invalid</div>
        }
    </div>
        <div class="form-field">
        <label for="attackStrength">Attack Strenght</label>
        <input id="attackStrength" name="attackStrength" type="number" formControlName="attackStrength">
        @if(isFieldValid("attackStrength")) {
            <div class="error">This field is invalid</div>
        }
    </div>
        <div class="form-field">
        <label for="attackDescription">Attack Description</label>
        <input id="attackDescription" name="attackDescription" type="text" formControlName="attackDescription">
        @if(isFieldValid("attackDescription")) {
            <div class="error">This field is invalid</div>
        }
    </div>
<div class="button-container">
    <button (click)="navigateBack()">Back</button>
    <button type="submit" [disabled]="formGroup.invalid">Save</button>
</div>
<div><button (click)="deleteMonster()">Delete Monster</button></div>
  </form>
</div>
